\# F-UVC Water Bottle – STM32L031 Firmware



Firmware for a prototype UVC water bottle controller based on the STM32L031K6 (NUCLEO-L031K6).



SAFETY WARNING: This firmware is part of a UVC water disinfection prototype. UVC light can be hazardous to skin and eyes. Do not operate any UVC LEDs without proper enclosure, shielding, and safety testing. This code is provided for educational and prototyping purposes only.



\## Behavior



\- \*\*Single tap\*\* on the button → start a \*\*1-minute UVC cycle\*\*

&nbsp; - Load switch enabled

&nbsp; - RGB status LED shows \*\*amber\*\*



\- \*\*Double tap\*\* (two taps within ~400 ms) → start a \*\*3-minute UVC cycle\*\*

&nbsp; - Load switch enabled

&nbsp; - RGB status LED shows \*\*blue\*\*



\- \*\*Tap during an active cycle\*\* → \*\*cancel\*\* the cycle

&nbsp; - Load switch turns OFF

&nbsp; - RGB LED returns to idle (off)



\- \*\*Reed switch (lid safety)\*\*

&nbsp; - Reed switch is wired so \*\*LOW = closed (lid on, magnet present)\*\*.

&nbsp; - If the reed switch ever opens (lid removed / unsafe):

&nbsp;   - The load switch turns \*\*OFF\*\*

&nbsp;   - Any running cycle is \*\*aborted\*\*

&nbsp;   - New cycles are blocked until the lid is closed again



\## Build \& Flash



1\. Open the project in \*\*STM32CubeIDE\*\* (`File → Import → Existing Projects into Workspace`).

2\. Select the `F-UVC-WaterBottle` folder as the root directory.

3\. Build the `Debug` configuration.

4\. Use the `F-UVC-WaterBottle Debug` launch configuration (or create your own) to flash to a NUCLEO-L031K6.



The project uses the STM32 HAL and the `STM32L031K6TX\_FLASH.ld` linker script generated by CubeMX.



